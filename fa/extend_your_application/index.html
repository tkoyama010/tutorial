
<!DOCTYPE HTML>
<html lang="fa" >
    <head>
        <meta charset="UTF-8">
        <title>برنامه خود را توسعه دهید · HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.7.5">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-richquotes/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-sidebar-ad/sidebar-ad.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-codeblock-label/block.css">
                
            
                
                <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-sectionx-ex/sectionx.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../django_forms/" />
    
    
    <link rel="prev" href="../template_extending/" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
  
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="چیزی برای جستجو بنویسید" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://gitter.im/DjangoGirls/tutorial" target="_blank" class="custom-link">Need help? Talk to us!</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    معرفی
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../installation/">
            
                <a href="../installation/">
            
                    
                    نصب و راه‌اندازی
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../installation/">
            
                <a href="../installation/#command-line">
            
                    
                    خط فرمان
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../installation/">
            
                <a href="../installation/#python">
            
                    
                    پایتون
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../installation/">
            
                <a href="../installation/#code-editor">
            
                    
                    ویرایشگر کد
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../installation/">
            
                <a href="../installation/#virtualenv">
            
                    
                    محیط مجازی
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../installation/">
            
                <a href="../installation/#django">
            
                    
                    جنگو
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../installation/">
            
                <a href="../installation/#git">
            
                    
                    گیت
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../installation/">
            
                <a href="../installation/#github-account">
            
                    
                    GitHub
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.8" data-path="../installation/">
            
                <a href="../installation/#pythonanywhere-account">
            
                    
                    PythonAnywhere
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../chromebook_setup/">
            
                <a href="../chromebook_setup/">
            
                    
                    نصب و راه اندازی (کروم بوک)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../how_the_internet_works/">
            
                <a href="../how_the_internet_works/">
            
                    
                    اینترنت چگونه کار می‌کند
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../intro_to_command_line/">
            
                <a href="../intro_to_command_line/">
            
                    
                    آشنایی با خط فرمان
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../python_installation/">
            
                <a href="../python_installation/">
            
                    
                    نصب و راه اندازی پایتون
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../code_editor/">
            
                <a href="../code_editor/">
            
                    
                    ویرایشگر کد
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../python_introduction/">
            
                <a href="../python_introduction/">
            
                    
                    آشنایی با پایتون
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../django/">
            
                <a href="../django/">
            
                    
                    جنگو چیست?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../django_installation/">
            
                <a href="../django_installation/">
            
                    
                    نصب و راه اندازی جنگو
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../django_start_project/">
            
                <a href="../django_start_project/">
            
                    
                    اولین پروژه جنگو شما!
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../django_models/">
            
                <a href="../django_models/">
            
                    
                    مدل در جنگو
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../django_admin/">
            
                <a href="../django_admin/">
            
                    
                    پنل مدیریت در جنگو
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../deploy/">
            
                <a href="../deploy/">
            
                    
                    فاز دیپلوی!
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../django_urls/">
            
                <a href="../django_urls/">
            
                    
                    URL ها در جنگو
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../django_views/">
            
                <a href="../django_views/">
            
                    
                    ساخت view در جنگو!
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.17" data-path="../html/">
            
                <a href="../html/">
            
                    
                    آشنایی با HTML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.18" data-path="../django_orm/">
            
                <a href="../django_orm/">
            
                    
                    ORM در جنگو
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.19" data-path="../dynamic_data_in_templates/">
            
                <a href="../dynamic_data_in_templates/">
            
                    
                    داده های پویا در templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.20" data-path="../django_templates/">
            
                <a href="../django_templates/">
            
                    
                    templates در جنگو
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.21" data-path="../css/">
            
                <a href="../css/">
            
                    
                    CSS - آن را زیبا کنید
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.22" data-path="../template_extending/">
            
                <a href="../template_extending/">
            
                    
                    توسعه template
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.23" data-path="./">
            
                <a href="./">
            
                    
                    برنامه خود را توسعه دهید
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.24" data-path="../django_forms/">
            
                <a href="../django_forms/">
            
                    
                    فرم در جنگو
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.25" data-path="../whats_next/">
            
                <a href="../whats_next/">
            
                    
                    گام بعدی چیست؟
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            انتشار یافته توسط HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
  <div class="sidebar-addition">
      
        <a href="https://www.patreon.com/djangogirls" target="_blank">
      
        <img src="https://djangogirls.org/static/img/global/donate/lagos.jpg" />
      
        </a>
      
      
        <p>💖 Support our work and donate to our project! ✨</p>
      
      
      <a href="https://www.patreon.com/djangogirls" class="btn" target="_blank">
        Donate now!
      </a>
      
  </div>

    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >برنامه خود را توسعه دهید</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="برنامه-خود-را-توسعه-دهید">برنامه خود را توسعه دهید</h1>
<p>ما تقریباً تمام مراحل مختلف ضروری برای ساختن وبسایتمان را کامل کرده‌ایم: می‌دانیم که چطور مدل، URL، ویو و تمپلیت بنویسیم. علاوه بر این می‌دانیم که چطور وبسایتمان را زیباتر کنیم.</p>
<p>زمان تمرین است!</p>
<p>اولین چیزی که در وبلاگمان لازم داریم صفحه‌ای است که یک پست را نشان دهد، درست است؟</p>
<p>ما یک مدل <code>Post</code> داریم پس لازم نیست چیزی به فایل <code>models.py</code> اضافه کنیم.</p>
<h2 id="ساختن-لینک-به-جزییات-پست-در-تمپلیت">ساختن لینک به جزییات پست در تمپلیت</h2>
<p>ما با اضافه کردن یک لینک به فایل <code>blog/templates/blog/post_list.html</code> آغاز می‌کنیم. این فایل را در ویرایشگر کد باز کنید و تا اینجا باید شبیه به این باشد: </p><p class="code-label">blog/templates/blog/post_list.html</p><p></p>
<pre><code class="lang-html">{% extends &apos;blog/base.html&apos; %}

{% block content %}
    {% for post in posts %}
        <span class="hljs-tag">&lt;<span class="hljs-name">article</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">time</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;date&quot;</span>&gt;</span>
                {{ post.published_date }}
            <span class="hljs-tag">&lt;/<span class="hljs-name">time</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span>{{ post.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ post.text|linebreaksbr }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
    {% endfor %}
{% endblock %}
</code></pre>
<p> ما می‌خواهیم در لیست پست ها، یک لینک از عنوان پست وبلاگی به جزییات پست داشته باشیم. عبارت <code>&lt;h2&gt;&lt;a href=&quot;&quot;&gt;{{ post.title }}&lt;/a&gt;&lt;/h2&gt;</code> را تغییر دهید تا به صفحه جزییات پست لینک شود: </p>
<p></p><p class="code-label"><span class="glyphicon glyphicon-exclamation-sign" style="color: red;" aria-hidden="true" data-toggle="tooltip" title="An error is expected when you run this code!"></span> blog/templates/blog/post_list.html</p><p></p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;{% url &apos;post_detail&apos; pk=post.pk %}&quot;</span>&gt;</span>{{ post.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
</code></pre>
<p> زمان آن است که عبارت رازآلود <code>{% url &apos;post_detail&apos; pk=post.pk %}</code> را توضیح دهیم. همانطور که ممکن است حدس زده باشید این علامت <code>{% %}</code> به معنی آن است که ما از سیستم template tag جنگو استفاده می‌کنیم. این بار ما از یک tag استفاده خواهیم کرد که برایمان یک URL بسازد!</p>
<p>بخش <code>post_detail</code> به معنی آن است که جنگو انتظار دارد یک آدرس به نام post_detail، در فایل <code>blog/urls.py</code> وجود داشته باشد</p>
<p>حالا معنی <code>pk=post.pk</code> چیست؟ <code>pk</code> مخفف primary key (کلید اصلی) است که یک نام منحصر به فرد برای هر ردیف از داده‌ها در پایگاه داده می‌باشد. هر مدل جنگو یک فیلد به عنوان کلید اصلی دارد، و سوای اینکه چه نام دیگری داشته باشد، همواره به عنوان pk قابل ارجاع است. چون ما در مدل <code>Post</code> کلید اصلی نساخته بودیم، جنگو یکی برای ما ساخته است (به طور پیشفرض فیلدی که نام آن &quot;id&quot; است، عددی را در خود ذخیره می‌کند که با هر دیتای جدید یکی به آن اضافه می‌شود مثلاً 1، 2، 3 ) و برای هر پست جدید در وبلاگ یکی به آن اضافه می‌کند. ما با نوشتن <code>post.pk</code> به کلید اصلی دسترسی پیدا می‌کنیم، همانطور که به فیلدهای دیگر (مانند <code>title</code> و <code>author</code>) در آبژکت <code>Post</code>، دسترسی داشته‌ایم.</p>
<p>حالا وقتی به آدرس <a href="http://127.0.0.1:8000/" target="_blank">http://127.0.0.1:8000/</a> می‌رویم با خظا مواجه می‌شویم (همانطور که انتظار داشتیم، چرا که ما هنوز برای <code>post_detail</code> ، یک آدرس یا یک <em>view</em> نساخته ایم). چیزی شبیه به این:</p>
<p><img src="images/no_reverse_match2.png" alt="خطا NoReverseMatch"></p>
<h2 id="ساختن-آدرس-برای-جزییات-یک-پست-وبلاگ">ساختن آدرس برای جزییات یک پست وبلاگ</h2>
<p>بیایید یک URL برای <em>ویو</em> <code>post_detail</code> در فایل <code>urls.py</code> بسازیم!</p>
<p>ما می‌خواهیم جزییات اولین پست ما در این <strong>URL</strong> دیده شود: <a href="http://127.0.0.1:8000/post/1/" target="_blank">http://127.0.0.1:8000/post/1/</a></p>
<p>بیایید یک آدرس در فایل <code>blog/urls.py</code> بسازیم تا جنگو را به <em>view</em> با نام <code>post_detail</code> هدایت کند که جزییات کامل یک پست وبلاگ را نشان می‌دهد. فایل <code>blog/urls.py</code>را در ویرایشگر کد باز کنید و خط <code>path(&apos;post/&lt;int:pk&gt;/&apos;, views.post_detail, name=&apos;post_detail&apos;),</code> را اضافه کنید، چیزی شبیه به این می‌شود:</p>
<p></p><p class="code-label"><span class="glyphicon glyphicon-exclamation-sign" style="color: red;" aria-hidden="true" data-toggle="tooltip" title="An error is expected when you run this code!"></span> blog/urls.py</p><p></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> django.urls <span class="hljs-keyword">import</span> path
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> views

urlpatterns = [
    path(<span class="hljs-string">&apos;&apos;</span>, views.post_list, name=<span class="hljs-string">&apos;post_list&apos;</span>),
    path(<span class="hljs-string">&apos;post/&lt;int:pk&gt;/&apos;</span>, views.post_detail, name=<span class="hljs-string">&apos;post_detail&apos;</span>),
]
</code></pre>
<p>بخش <code>post/&lt;int:pk&gt;/</code> یک الگوی URL را معرفی می‌کند که برای شما توضیح خواهیم داد:</p>
<ul>
<li><code>post/</code> نشان می‌دهد که آدرس باید با کلمه <strong>post</strong> شروع شده باشد و در ادامه آن یک <strong>/</strong> وجود داشته باشد. تا اینجا همه چیز خوب است.</li>
<li><code>&lt;int:pk&gt;</code> این بخش ممکن است کمی گیج کننده باشد، این عبارت به این معنی است که جنگو انتظار دارد که یک عدد صحیح دریافت کند و مقدار آن را به یک متغیر به نام <code>pk</code> نسبت خواهد داد.</li>
<li><code>/</code> - درنهایت ما به یک <strong>/</strong> در انتهای آدرس نیاز داریم.</li>
</ul>
<p>یعنی اگر شما آدرس <code>http://127.0.0.1:8000/post/5/</code> را در مرورگر خود وارد کنید جنگو متوجه خواهد شد که شما به دنبال یک <em>view</em> به نام <code>post_detail</code> هستید و مقدار متغیر <code>pk</code> را برابر <code>5</code> قرار می‌دهد و این اطلاعات را به <em>view</em> مورد نظر ارسال می‌کند.</p>
<p>بسیار عالی، ما یک الگوی آدرس جدید به فایل <code>blog/urls.py</code> اضافه کردیم! حالا صفحه <a href="http://127.0.0.1:8000/" target="_blank">http://127.0.0.1:8000/</a> را دوباره بارگزاری کنید، بووم! سرور دوباره متوقف شده است. به کنسول نگاهی بیندازید، یک پیغام خطای دیگر دیده می‌شود!</p>
<p><img src="images/attribute_error2.png" alt="AttributeError"></p>
<p>یادتان هست که مرحله بعدی چیست؟ اضافه کردن ویو!</p>
<h2 id="اضافه-کردن-ویو-جزییات-یک-پست">اضافه کردن ویو جزییات یک پست</h2>
<p>این بار <em>view</em> ما یک پارامتر اضافه دریافت کرده است، <code>pk</code>. <em>ویو</em> ما باید بتواند آن را دریافت کند، درست است؟ پس ما تابع خودمان را به این صورت تعریف می‌کنیم <code>def post_detail(request, pk):</code>. باید توجه داشته باشید که این پارامتر باید دقیقاً همان نامی را داشته باشد که ما در <code>urls</code> تعریف کرده‌ایم (<code>pk</code>). همچنین توجه کنید که حذف این متغیر، غلط است و باعث ایجاد خطا خواهد شد.</p>
<p>حالا ما می‌خواهیم فقط و فقط یک پست وبلاگی را داشته باشیم. برای اینکار از کوئری ست به شکل زیر استفاده می‌کنیم:</p>
<p></p><p class="code-label"><span class="glyphicon glyphicon-exclamation-sign" style="color: red;" aria-hidden="true" data-toggle="tooltip" title="An error is expected when you run this code!"></span> blog/views.py</p><p></p>
<pre><code class="lang-python">Post.objects.get(pk=pk)
</code></pre>
<p>اما این کد یک مشکل دارد. اگر هیچ <code>Post</code> با <code>کلید اصلی</code> (<code>pk</code>) وجود نداشته باشد، یک خطای زشت دریافت خواهیم کرد!</p>
<p><img src="images/does_not_exist2.png" alt="خطا DoesNotExist"></p>
<p>چنین چیزی را نمی‌خواهیم! اما خوشبختانه جنگو چیزی دارد که می‌تواند این مشکل را حل کند: <code>get_object_or_404</code>. در صورتی که هیچ <code>Post</code> با <code>pk</code> داده شده وجود نداشته باشد، یک صفحه خطای زیباتر یعنی صفحه <code>Page Not Found 404</code> را نشان خواهد داد.</p>
<p><img src="images/404_2.png" alt="صفحه پیدا نشد"></p>
<p>خبر خوب اینکه شما می‌توانید صفحه <code>Page not found</code> اختصاصی برای خودتان را با سلیقه خودتان بسازید. اما این الان موضوع خیلی مهمی نیست بنابراین ما از آن رد خواهیم شد.</p>
<p>وقت آن است که یک <em>ویو</em> به فایل <code>views.py</code> اضافه کنیم!</p>
<p>در فایل <code>blog/urls.py</code> ما یک الگوی آدرس به نام <code>post_detail</code> ساختیم که به یک ویو با نام <code>views.post_detail</code> ارجاع داشت. این به این معنی است که جنگو انتظار دارد که یک تابع با نام <code>post_detail</code> در فایل <code>blog/views.py</code> وجود داشته باشد.</p>
<p>زمان آن است که فایل <code>blog/views.py</code> را در ویرایشگر کد باز کنید و خطوط زیر را در ردیف <code>from</code> ها اضافه کنید:</p>
<p></p><p class="code-label">blog/views.py</p><p></p>
<pre><code class="lang-python"><span class="hljs-keyword">from</span> django.shortcuts <span class="hljs-keyword">import</span> render, get_object_or_404
</code></pre>
<p>و در انتهای فایل، <em>ویو</em> خودمان را اضافه خواهیم کرد:</p>
<p></p><p class="code-label">blog/views.py</p><p></p>
<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">post_detail</span>(<span class="hljs-params">request, pk</span>):</span>
    post = get_object_or_404(Post, pk=pk)
    <span class="hljs-keyword">return</span> render(request, <span class="hljs-string">&apos;blog/post_detail.html&apos;</span>, {<span class="hljs-string">&apos;post&apos;</span>: post})
</code></pre>
<p>بله، حالا وقت بارگذاری مجدد صفحه است: <a href="http://127.0.0.1:8000/" target="_blank">http://127.0.0.1:8000/</a></p>
<p><img src="images/post_list2.png" alt="Post list view"></p>
<p>کار می‌کند! ولی وقتی روی لینک مربوط به عنوان یک پست کلیک کنید چه اتفاقی می‌افتد؟</p>
<p><img src="images/template_does_not_exist2.png" alt="خطا TemplateDoesNotExist"></p>
<p>وای نه! یک خطای دیگر! اما حالا ما می‌دانیم که چطور با این خطا برخورد کنیم، درست است؟ ما باید یک تمپلیت اضافه کنیم!</p>
<h2 id="ساختن-یک-تمپلیت-برای-جزییات-پست-وبلاگی">ساختن یک تمپلیت برای جزییات پست وبلاگی</h2>
<p>در پوشه <code>blog/templates/blog</code> یک فایل به نام <code>post_detail.html</code> بسازید و آن را در ویرایشگر کد باز کنید.</p>
<p>حالا کد زیر را تایپ کنید:</p>
<p></p><p class="code-label">blog/templates/blog/post_detail.html</p><p></p>
<pre><code class="lang-html">{% extends &apos;blog/base.html&apos; %}

{% block content %}
    <span class="hljs-tag">&lt;<span class="hljs-name">article</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span>
        {% if post.published_date %}
            <span class="hljs-tag">&lt;<span class="hljs-name">time</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;date&quot;</span>&gt;</span>
                {{ post.published_date }}
            <span class="hljs-tag">&lt;/<span class="hljs-name">time</span>&gt;</span>
        {% endif %}
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{{ post.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ post.text|linebreaksbr }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
{% endblock %}
</code></pre>
<p>یک بار دیگر ما فایل <code>base.html</code> را اضافه کرده‌ایم. ما می‌خواهیم در بلوک <code>content</code> ، جزییات یک پست منتشر شده (اگر چنین پستی وجود داشت) شامل عنوان و متن را نشان دهیم. اما باید در مورد چند موضوع مهم صحبت کنیم، خب؟</p>
<p><code>{% if ... %} ... {% endif %}</code> یک تمپلیت تگ است که وقتی می‌خواهیم چیزی را چک کنیم از آن استفاده می‌کنیم. (عبارت <code>if ... else ...</code> را از بخش <strong>آشنایی با پایتون</strong> به یاد دارید؟) در این سناریو ما می‌خواهیم بررسی کنیم آیا بخش <code>published_date</code> مربوط به یک پست خالی نیست.</p>
<p>بسیار خوب، ما می‌توانیم صفحه وبلاگمان را دوباره بارگذاری کنیم و ببینیم آیا خطا <code>TemplateDoesNotExist</code> از بین رفته است یا نه.</p>
<p><img src="images/post_detail2.png" alt="صفحه جزییات پست"></p>
<p>واو! بالاخره کار کرد!</p>
<h1 id="زمان-دیپلوی">زمان دیپلوی!</h1>
<p>خوب خواهد بود اگر ببینیم وبسایت شما هنوز روی PythonAnywhere کار میکند یا نه؟پس بیایید یک بار دیگر آن را منتشر کنیم.</p>
<p></p><p class="code-label">خط فرمان</p><p></p>
<pre><code>$ git status
$ git add .
$ git status
$ git commit -m &quot;Added view and template for detailed blog post as well as CSS for the site.&quot;
$ git push
</code></pre><p>سپس در کنسول <a href="https://www.pythonanywhere.com/consoles/" target="_blank">PythonAnywhere Bash console</a> تایپ کنید:</p>
<p></p><p class="code-label">PythonAnywhere command-line</p><p></p>
<pre><code>$ cd ~/&lt;your-pythonanywhere-domain&gt;.pythonanywhere.com
$ git pull
[...]
</code></pre><p>(یادتان باشد که <code>&lt;your-pythonanywhere-domain&gt;</code> را با زیر دامنه اصلی خود در PythonAnywhere عوض کنید البته بدون آکولادها.)</p>
<h2 id="به-روزرسانی-فایل‌های-ایستا-در-سرور">به روزرسانی فایل‌های ایستا در سرور</h2>
<p>سرورهایی مانند PythonAnywhere دوست دارند که با فایل‌های ایستا (مانند فایل‌های CSS) به گونه‌ای متفاوت از فایل‌های پایتون برخورد کنند، چرا که می‌توانند آن ها را بهینه کنند و سرعت لود شدن آن‌ها را افزایش دهند. در نتیجه هرگاه که ما تغییری در فایل‌های CSS می‌دهیم ، باید دستوری اضافه بر روی آن اجرا کنیم تا به سرور بگوییم که این فایل‌ها تغییر کرده اند. این دستور <code>collectstatic</code> نام دارد.</p>
<p>ابتدا با فعال کردن محیط مجازی شروع کنیم اگر از قبل هنوز فعال نیست (PythonAnywhere از دستوری به نام <code>workon</code> برای این کار استفاده می‌کند این دستور دقیقاً شبیه <code>source myenv/bin/activate</code> است که شما بر روی کامپیوتر خودتان اجرا می‌کنید):</p>
<p></p><p class="code-label">PythonAnywhere command-line</p><p></p>
<pre><code>$ workon &lt;your-pythonanywhere-domain&gt;.pythonanywhere.com
(ola.pythonanywhere.com)$ python manage.py collectstatic
[...]
</code></pre><p>دستور <code>manage.py collectstatic</code> تقریباً شبیه دستور <code>manage.py migrate</code> است. ما تغییراتی در کدها می‌دهیم و به جنگو می‌گوییم این تغییرات را <em>apply</em> (اعمال) کند، چه در فایل‌های ایستا در سرور باشد چه در پایگاه داده.</p>
<p>به هرحال، الان ما آماده هستیم، به سراغ <a href="https://www.pythonanywhere.com/web_app_setup/" target="_blank">&quot;Web&quot; page</a> بروید (از طریق دکمه menu در گوشه بالا و سمت راست کنسول) و دکمه <strong>Reload</strong> را بزنید و سپس به صفحه <a href="https://subdomain.pythonanywhere.com" target="_blank">https://subdomain.pythonanywhere.com</a> نگاه کنید تا نتیجه را ببینید.</p>
<p>به نتیجه رسید! تبریک! :)</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../template_extending/" class="navigation navigation-prev " aria-label="Previous page: توسعه template">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../django_forms/" class="navigation navigation-next " aria-label="Next page: فرم در جنگو">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"برنامه خود را توسعه دهید","level":"1.23","depth":1,"next":{"title":"فرم در جنگو","level":"1.24","depth":1,"path":"django_forms/README.md","ref":"django_forms/README.md","articles":[]},"previous":{"title":"توسعه template","level":"1.22","depth":1,"path":"template_extending/README.md","ref":"template_extending/README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["heading-anchors@1.0.3","ga@1.0.1","richquotes@0.0.9","github@2.0.0","language-picker","sidebar-ad","codeblock-label","sectionx-ex","collapsible-menu"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"collapsible-menu":{},"language-picker":{"grid-columns":3},"github":{"url":"https://github.com/DjangoGirls/tutorial"},"codeblock-label":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sectionx-ex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"richquotes":{"default":false},"sectionx":{"tag":"b"},"heading-anchors":{},"sidebar-ad":{"imageUrl":"https://djangogirls.org/static/img/global/donate/lagos.jpg","url":"https://www.patreon.com/djangogirls","description":"💖 Support our work and donate to our project! ✨","btnText":"Donate now!"},"highlight":{},"ga":{"configuration":"auto","token":"UA-51680040-3"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"py_version":"3.8","py_release":"3.8.6","py_min_version":"3.6","py_min_release":"3.6.8","pa_py_version":"3.8","django_version":"3.2.10"},"language":"fa","links":{"sidebar":{"Need help? Talk to us!":"https://gitter.im/DjangoGirls/tutorial"}},"gitbook":"*"},"file":{"path":"extend_your_application/README.md","mtime":"2022-11-25T15:13:00.019Z","type":"markdown"},"gitbook":{"version":"3.7.5","time":"2022-11-25T15:13:18.368Z"},"basePath":"..","book":{"language":"fa"}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/1.2.1/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-heading-anchors/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sectionx-ex/sectionx.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

